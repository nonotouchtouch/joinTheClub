<!DOCTYPE html>
<html>
<head>
<script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
<meta charset="UTF-8">
<title>更改密码</title>
<script type="text/javascript">

function change(){	
	
	if(document.getElementById("newpwd").value!=document.getElementById("newpwd2").value){
		alert("两次密码不符。");
		return null;
	}
	if(document.getElementById("newpwd").value==null){
		alert("请输入新密码。");
		return null;
	}
	var ajax;
	if (window.XMLHttpRequest) {
		ajax = new XMLHttpRequest();
	} else if (window.ActiveXObject) {
		ajax = new ActiveXObject("Microsoft.XMLHTTP");
	} else {
		alert('not support ajax');
		return false;
	}

	ajax.onreadystatechange = function() {
		if (ajax.readyState == 4 && ajax.status == 200) {
			var response = ajax.responseText;
			
		if(response=="true"){
			alert("密码更新成功")
		}
		else{
			alert("旧密码错误，修改失败")
		}
		
		}
	}
	ajax.open('get', '/joinTheClub/changepwd?oldpwd='+document.getElementById("oldpwd").value+"&newpwd="+document.getElementById("newpwd").value, true);
	ajax.send();
}


</script>
</head>
<style>body {
    font: normal 11px auto "Trebuchet MS", Verdana, Arial, Helvetica, sans-serif;
    color: #4f6b72;
    background: #E6EAE9;
}</style>
<body>
<center>
<h1>修改密码</h1>
<form>
旧密码：<input type="password" id="oldpwd" placeholder="请输入旧密码" required/> <br>
新密码：<input type="password" id="newpwd" placeholder="请输入新密码" required/> <br>
新密码：<input type="password" id="newpwd2" placeholder="请再次输入新密码" required/> <br>
<input type="button" value="确定" onclick="change();"/>
<button  type="button" onclick="javascrtpt:window.location.href='/joinTheClub/html/welcome.html'">返回</button>
</form>

</center>
</body>
</html>